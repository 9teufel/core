var Isotope={toggleAddressFields:function(a,b){if(a.value=="0"&&a.checked)$(b).setStyle("display","block");else $(b).setStyle("display","none")},displayBox:function(i,h){var e="iso_ajaxOverlay",d="iso_ajaxBox",a=$(d),b=$(e);if(!b)b=new Element("div").setProperty("id",e).injectInside($(document.body));if(!a)a=new Element("div").setProperty("id",d).injectInside($(document.body));if(h){b.addEvent("click",Isotope.hideBox);a.addClass("btnClose").addEvent("click",Isotope.hideBox)}var f=window.getScroll().y;if(Browser.Engine.trident&&Browser.Engine.version<5)for(var g=$$("select"),c=0;c<g.length;c++)g[c].setStyle("visibility","hidden");b.setStyle("display","block");b.setStyle("top",f+"px");a.set("html",i);a.setStyle("display","block");a.setStyle("top",f+100+"px")},hideBox:function(){var c=$("iso_ajaxBox"),b=$("iso_ajaxOverlay");b&&b.setStyle("display","none").removeEvents("click");if(c){c.setStyle("display","none").removeEvents("click").removeClass("btnClose");if(Browser.Engine.trident&&Browser.Engine.version<5)for(var d=$$("select"),a=0;a<d.length;a++)d[a].setStyle("visibility","visible")}},inlineGallery:function(c,b){var a="active";$$("#"+b+"_mediumsize img").set("src",c.href);$$("#"+b+"_gallery div, #"+b+"_gallery img").removeClass(a);c.addClass(a);c.getChildren().addClass(a);return false}},IsotopeProduct=new Class({Implements:Options,Binds:["refresh"],options:{language:"en",action:"fmd",page:0,loadMessage:"Loading product data â€¦"},initialize:function(h,g,d,e,f){var c="input.radio",b="radio_container",a=this;a.setOptions(f);a.form=document.id(d);if(a.form){a.form.set("send",{url:"ajax.php?action="+a.options.action+"&id="+h+"&language="+a.options.language+"&page="+a.options.page+"&product="+g,link:"cancel",onRequest:function(){Isotope.displayBox(this.options.loadMessage)}.bind(a),onSuccess:function(e){Isotope.hideBox();var a=JSON.decode(e);REQUEST_TOKEN=a.token;document.getElements('input[type="hidden"][name="REQUEST_TOKEN"]').set("value",a.token);a.content.each(function(d){var e=document.id(d.id);if(e){var a=null;new Element("div").set("html",d.html).getElements("*").each(function(b){if(b.get("id")==d.id)a=b});if(a){a.hasClass(b)&&a.getElements(c).each(function(a){a.addEvent("click",this.refresh)}.bind(this));a.cloneEvents(e).replaces(e)}}}.bind(this));window.fireEvent("ajaxready");$$("#"+d+" p.error").destroy()}.bind(a),onFailure:function(){Isotope.hideBox()}});e.each(function(a){a=$(a);if(a&&a.hasClass(b))a.getElements(c).each(function(a){a.addEvent("click",this.refresh)}.bind(this));else a&&a.addEvent("change",this.refresh)}.bind(a))}},refresh:function(){this.form.send()}});